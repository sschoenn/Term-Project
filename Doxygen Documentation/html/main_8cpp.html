<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SatTrack: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SatTrack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;PrintStream.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_adafruit___f_x_o_s8700_8h_source.html">Adafruit_FXOS8700.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="taskqueue_8h_source.html">taskqueue.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="taskshare_8h_source.html">taskshare.h</a>&quot;</code><br />
<code>#include &lt;analogWrite.h&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &quot;<a class="el" href="_t_o_d_8h_source.html">TOD.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_p13_8h_source.html">P13.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeb7009c385dcb51b5bb271fc8b1946b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aeb7009c385dcb51b5bb271fc8b1946b1">task_accelmag</a> (void *p_params)</td></tr>
<tr class="memdesc:aeb7009c385dcb51b5bb271fc8b1946b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which talks to the FXOS8700 accelerometer/magnetometer, and <br  />
 outputs inclination angle and magnetic heading.  <a href="main_8cpp.html#aeb7009c385dcb51b5bb271fc8b1946b1">More...</a><br /></td></tr>
<tr class="separator:aeb7009c385dcb51b5bb271fc8b1946b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe31f9377103a190d2d6762ed9bdb877"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afe31f9377103a190d2d6762ed9bdb877">task_position</a> (void *p_params)</td></tr>
<tr class="memdesc:afe31f9377103a190d2d6762ed9bdb877"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that interfaces with optical transmission sensors to implement an encoder, this task updates the current position read from the encoders.  <a href="main_8cpp.html#afe31f9377103a190d2d6762ed9bdb877">More...</a><br /></td></tr>
<tr class="separator:afe31f9377103a190d2d6762ed9bdb877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec57da88b4edbca8ff4fa79e3a05c042"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aec57da88b4edbca8ff4fa79e3a05c042">task_supervisor</a> (void *p_params)</td></tr>
<tr class="memdesc:aec57da88b4edbca8ff4fa79e3a05c042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which handles the 3 main states of the satellite tracker positioning system.  <a href="main_8cpp.html#aec57da88b4edbca8ff4fa79e3a05c042">More...</a><br /></td></tr>
<tr class="separator:aec57da88b4edbca8ff4fa79e3a05c042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a1c626f59becb67075cd4a0c92eb6c4b1">task_control</a> (void *p_params)</td></tr>
<tr class="memdesc:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which controls the azimuth and elevation motors using closed-loop speed control.  <a href="main_8cpp.html#a1c626f59becb67075cd4a0c92eb6c4b1">More...</a><br /></td></tr>
<tr class="separator:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f0d454a0ff72de6bf386c0d8eab842"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a63f0d454a0ff72de6bf386c0d8eab842">task_new_coords</a> (void *p_params)</td></tr>
<tr class="memdesc:a63f0d454a0ff72de6bf386c0d8eab842"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which predicts the elevation and azimuth of satellites.  <a href="main_8cpp.html#a63f0d454a0ff72de6bf386c0d8eab842">More...</a><br /></td></tr>
<tr class="separator:a63f0d454a0ff72de6bf386c0d8eab842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3afb11ff79c183f1cc747d71826395"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aea3afb11ff79c183f1cc747d71826395">task_time</a> (void *p_params)</td></tr>
<tr class="memdesc:aea3afb11ff79c183f1cc747d71826395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which returns current UTC time from the internet.  <a href="main_8cpp.html#aea3afb11ff79c183f1cc747d71826395">More...</a><br /></td></tr>
<tr class="separator:aea3afb11ff79c183f1cc747d71826395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino setup function which runs once at program startup.  <a href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino's low-priority loop function, which we don't use.  <a href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">More...</a><br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afca718498cafe1dd554d92c81ec6d6f7"><td class="memItemLeft" align="right" valign="top"><a id="afca718498cafe1dd554d92c81ec6d6f7"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afca718498cafe1dd554d92c81ec6d6f7">elevation</a> (&quot;ELEV&quot;)</td></tr>
<tr class="memdesc:afca718498cafe1dd554d92c81ec6d6f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Shares &amp; Queues Below. <br /></td></tr>
<tr class="separator:afca718498cafe1dd554d92c81ec6d6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43beb57d23b0270399f8fb6124338e86"><td class="memItemLeft" align="right" valign="top"><a id="a43beb57d23b0270399f8fb6124338e86"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>azimuth</b> (&quot;AZI&quot;)</td></tr>
<tr class="separator:a43beb57d23b0270399f8fb6124338e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada598a59ff623e2ff95a5d587006e4da"><td class="memItemLeft" align="right" valign="top"><a id="ada598a59ff623e2ff95a5d587006e4da"></a>
<a class="el" href="class_share.html">Share</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>clear_elevation</b> (&quot;CLEAR ELEV&quot;)</td></tr>
<tr class="separator:ada598a59ff623e2ff95a5d587006e4da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa916c9e08f34ddde5114fb6338f494"><td class="memItemLeft" align="right" valign="top"><a id="a7fa916c9e08f34ddde5114fb6338f494"></a>
<a class="el" href="class_share.html">Share</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>clear_azimuth</b> (&quot;CLEAR AZI&quot;)</td></tr>
<tr class="separator:a7fa916c9e08f34ddde5114fb6338f494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9be3008c76b543f5439ebcbe2f6ba0"><td class="memItemLeft" align="right" valign="top"><a id="abe9be3008c76b543f5439ebcbe2f6ba0"></a>
<a class="el" href="class_share.html">Share</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>elev_direction</b> (&quot;ELEV DIR&quot;)</td></tr>
<tr class="separator:abe9be3008c76b543f5439ebcbe2f6ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d933e2436873b158a95415caf08eb06"><td class="memItemLeft" align="right" valign="top"><a id="a0d933e2436873b158a95415caf08eb06"></a>
<a class="el" href="class_share.html">Share</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>azi_direction</b> (&quot;AZI DIR&quot;)</td></tr>
<tr class="separator:a0d933e2436873b158a95415caf08eb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b56eadd1551f1336895ccdf7474763"><td class="memItemLeft" align="right" valign="top"><a id="aa5b56eadd1551f1336895ccdf7474763"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>elevation_sp</b> (&quot;SP ELEV&quot;)</td></tr>
<tr class="separator:aa5b56eadd1551f1336895ccdf7474763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1133075a4f7194a77ac8d2f0d4bd31"><td class="memItemLeft" align="right" valign="top"><a id="a7e1133075a4f7194a77ac8d2f0d4bd31"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>azimuth_sp</b> (&quot;SP AZI&quot;)</td></tr>
<tr class="separator:a7e1133075a4f7194a77ac8d2f0d4bd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22787515c95e8ab0e372ce8ffc0fb5c"><td class="memItemLeft" align="right" valign="top"><a id="ab22787515c95e8ab0e372ce8ffc0fb5c"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mag</b> (&quot;MAG&quot;)</td></tr>
<tr class="separator:ab22787515c95e8ab0e372ce8ffc0fb5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af936fa363debb1d14c15a6b3147f25a6"><td class="memItemLeft" align="right" valign="top"><a id="af936fa363debb1d14c15a6b3147f25a6"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>accel</b> (&quot;ACCEL&quot;)</td></tr>
<tr class="separator:af936fa363debb1d14c15a6b3147f25a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc0a70e759565e16d925d913a40e66f"><td class="memItemLeft" align="right" valign="top"><a id="abbc0a70e759565e16d925d913a40e66f"></a>
<a class="el" href="class_share.html">Share</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>start</b> (&quot;start&quot;)</td></tr>
<tr class="separator:abbc0a70e759565e16d925d913a40e66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04785256b7389c358a4510a33567b9b1"><td class="memItemLeft" align="right" valign="top"><a id="a04785256b7389c358a4510a33567b9b1"></a>
<a class="el" href="class_queue.html">Queue</a>&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>starttime_queue</b> (6)</td></tr>
<tr class="separator:a04785256b7389c358a4510a33567b9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef550f9d57c6dc8b98173270b973c48a"><td class="memItemLeft" align="right" valign="top"><a id="aef550f9d57c6dc8b98173270b973c48a"></a>
<a class="el" href="class_queue.html">Queue</a>&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>currenttime_queue</b> (48)</td></tr>
<tr class="separator:aef550f9d57c6dc8b98173270b973c48a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef89f842d8608a4ec2b6b793b066348"><td class="memItemLeft" align="right" valign="top"><a id="afef89f842d8608a4ec2b6b793b066348"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>elevation_coords</b> (&quot;ELEV_CORDS&quot;)</td></tr>
<tr class="separator:afef89f842d8608a4ec2b6b793b066348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb4ec9c3908f6da74eef6f5c79a48011"><td class="memItemLeft" align="right" valign="top"><a id="aeb4ec9c3908f6da74eef6f5c79a48011"></a>
<a class="el" href="class_share.html">Share</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>azimuth_coords</b> (&quot;AZI_CORDS&quot;)</td></tr>
<tr class="separator:aeb4ec9c3908f6da74eef6f5c79a48011"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains things that need to be documented</p>
<dl class="section author"><dt>Author</dt><dd>Simon Schoennauer, Deven Frauenhofer, Lynette Cox </dd></dl>
<dl class="section date"><dt>Date</dt><dd>4 Nov 2020 Original file </dd>
<dd>
1 Dec 2020 Final file </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino's low-priority loop function, which we don't use. </p>
<p>A non-RTOS Arduino program runs all of its continuously running code in this function after <code><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Arduino setup function which runs once at program startup.">setup()</a></code> has finished. When using FreeRTOS, <code><a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Arduino&#39;s low-priority loop function, which we don&#39;t use.">loop()</a></code> implements a low priority task on most microcontrollers, and crashes on some others, so we'll not use it. </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino setup function which runs once at program startup. </p>
<p>This function sets up a serial port for communication and creates the tasks which will be run. </p>

</div>
</div>
<a id="aeb7009c385dcb51b5bb271fc8b1946b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb7009c385dcb51b5bb271fc8b1946b1">&#9670;&nbsp;</a></span>task_accelmag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_accelmag </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which talks to the FXOS8700 accelerometer/magnetometer, and <br  />
 outputs inclination angle and magnetic heading. </p>
<p>This task reads raw 3-axis data from both the accelerometer and magnetometer. The magnetometer data is calibrated before it is converted into a magnetic heading. The accelerometer data is directly converted into a tilt angle. The magnetic heading (azimuth angle) and elevation angle are placed into shared data variables. This task uses the Adafruit FXOS8700 library at <code><a href="https://github.com/adafruit/Adafruit_FXOS8700.git">https://github.com/adafruit/Adafruit_FXOS8700.git</a></code> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer </td></tr>
    <tr><td class="paramname">ax</td><td>variable that contains the raw X-axis accelerometer reading </td></tr>
    <tr><td class="paramname">ay</td><td>variable that contains the raw Y-axis accelerometer reading </td></tr>
    <tr><td class="paramname">az</td><td>variable that contains the raw Z-axis accelerometer reading </td></tr>
    <tr><td class="paramname">mx</td><td>variable that contains the raw X-axis magnetometer reading </td></tr>
    <tr><td class="paramname">my</td><td>variable that contains the raw Y-axis magnetometer reading </td></tr>
    <tr><td class="paramname">mz</td><td>variable that contains the raw Z-axis magnetometer reading </td></tr>
    <tr><td class="paramname">azi</td><td>variable that contains the current azimuth heading, in deg. </td></tr>
    <tr><td class="paramname">el</td><td>variable that contains the current elevation angle, in deg. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c626f59becb67075cd4a0c92eb6c4b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c626f59becb67075cd4a0c92eb6c4b1">&#9670;&nbsp;</a></span>task_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_control </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function which controls the azimuth and elevation motors using closed-loop speed control. </p>
<p>This function calculates and updates both the elevation and azimuth motor speeds based on current and desired position information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63f0d454a0ff72de6bf386c0d8eab842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f0d454a0ff72de6bf386c0d8eab842">&#9670;&nbsp;</a></span>task_new_coords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_new_coords </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which predicts the elevation and azimuth of satellites. </p>
<p>This task uses location data of the observer along with orbital characteristic data about the satellite to predict the azimuth and elevation of the satellite at certain times. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer </td></tr>
    <tr><td class="paramname">year</td><td>variable that contains the current year </td></tr>
    <tr><td class="paramname">month</td><td>variable that contains the current month </td></tr>
    <tr><td class="paramname">day</td><td>variable that contains the current day </td></tr>
    <tr><td class="paramname">h</td><td>variable that contains the current hour </td></tr>
    <tr><td class="paramname">m</td><td>variable that contains the current minute </td></tr>
    <tr><td class="paramname">s</td><td>variable that contains the current second </td></tr>
    <tr><td class="paramname">LA</td><td>variable that contains the latitude of the satellite tracker </td></tr>
    <tr><td class="paramname">LO</td><td>variable that contains the longitude of the satellite tracker </td></tr>
    <tr><td class="paramname">HT</td><td>variable that contains the elevation (above sea level) of the satellite tracker </td></tr>
    <tr><td class="paramname">alt</td><td>variable that contains the altitude of the satellite </td></tr>
    <tr><td class="paramname">az</td><td>variable that contains the azimuth of the satellite </td></tr>
    <tr><td class="paramname">range</td><td>variable that contains the range of the satellite </td></tr>
    <tr><td class="paramname">range_rate</td><td>variable that contains the range rate of the satellite </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe31f9377103a190d2d6762ed9bdb877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe31f9377103a190d2d6762ed9bdb877">&#9670;&nbsp;</a></span>task_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_position </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task that interfaces with optical transmission sensors to implement an encoder, this task updates the current position read from the encoders. </p>
<p>This task counts ticks for both the elevation and azimuth motor encoders. This task resets encoder count if it is flagged to do so. This task also converts total encoder count into angular position data for the elevation and azimuth axes using a calibration constant defined by the gear reductions in the mechanical system. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer </td></tr>
    <tr><td class="paramname">elevation</td><td>This is a share that is updated to contain the current elevation pointing position, in millidegrees, as read from the encoders. </td></tr>
    <tr><td class="paramname">azimuth</td><td>This is a share that is updated to contain the current azimuth magnetic heading, in millidegrees, as read from the encoders. </td></tr>
    <tr><td class="paramname">clear_elevation</td><td>A bool, if set true, the task sets</td></tr>
    <tr><td class="paramname">elevation</td><td>to zero and sets </td></tr>
    <tr><td class="paramname">clear_elevation</td><td>to false </td></tr>
    <tr><td class="paramname">clear_azimuth</td><td>A bool, if set true, the task sets</td></tr>
    <tr><td class="paramname">azimuth</td><td>to zero and sets </td></tr>
    <tr><td class="paramname">clear_azimuth</td><td>to false </td></tr>
    <tr><td class="paramname">elev_direction</td><td>This contains the elevation motor direction so the encoder can determine when to increment or decrement the total encoder count </td></tr>
    <tr><td class="paramname">azi_direction</td><td>This contains the azimuth motor direction so the <br  />
 encoder can determine when to increment or decrement the total encoder count </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aec57da88b4edbca8ff4fa79e3a05c042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec57da88b4edbca8ff4fa79e3a05c042">&#9670;&nbsp;</a></span>task_supervisor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_supervisor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which handles the 3 main states of the satellite tracker positioning system. </p>
<p>This task handles the following 3 states: state 0 - HOME STATE, this state is meant to run at the initial power up of the satellite tracking system. In this state, the system position itself toward the initial (start) location of <br  />
 the next satellite tracking sequence. Then moves into state 1. state 1 - WAIT STATE, this state occurs when the tracker is waiting to begin its track sequence. The tracker is aligned with the initial start position of the next satellite track sequence. This state checks current time (from the internet) and compares it to the inital start position sequence time. If the next satellite sequence start time matches the current time, moves into state 2. <br  />
 state 2 - TRACK STATE, this state occurs while the tracker is carrying out a tracking sequence. The tracker will sweep across the sky using coordinates it receives </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer. </td></tr>
  </table>
  </dd>
</dl>
<p>Initialize Variables</p>
<p>0-2: SUPERVISOR TASK STATE MACHINE</p>

</div>
</div>
<a id="aea3afb11ff79c183f1cc747d71826395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3afb11ff79c183f1cc747d71826395">&#9670;&nbsp;</a></span>task_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_time </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which returns current UTC time from the internet. </p>
<p>This task takes in your network SSID and password, establishes a connection with the internet, and then pulls UTC time. It stores current time data into a queue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>Pointer to parameters passed to this function; we don't expect to be passed anything and so ignore this pointer </td></tr>
    <tr><td class="paramname">currenttime_queue</td><td>This queue holds current time data in the form of year/month/day/hour/minute/second. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
